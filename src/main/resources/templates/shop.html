<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StyleLegacy - Fashion Website</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
<!-- Navigation Bar -->
<div th:replace="fragments/header-navbar :: navbar"></div>

<!-- Hero Section -->
<section class="hero-section position-relative">
    <!-- Carousel background -->
    <div id="heroCarousel" class="carousel slide carousel-fade position-absolute top-0 start-0 w-100 h-100"
         data-bs-ride="carousel">
        <div class="carousel-inner h-100">
            <div class="carousel-item active h-100">
                <img src="https://vn.louisvuitton.com/content/dam/lv/online/picture/asiapacific/2025/HP_Dream_Misty_Push1_DI3.jpg?wid=2400"
                     class="d-block w-100 h-100 object-fit-cover" alt="Slide 1">
            </div>
            <div class="carousel-item h-100">
                <img src="https://sneakernews.com/wp-content/uploads/2023/05/adidas-may-2023-gazelle-banner.jpg?w=1920"
                     class="d-block w-100 h-100 object-fit-cover" alt="Slide 2">
            </div>
            <div class="carousel-item h-100">
                <img src="https://sneakernews.com/wp-content/uploads/2023/05/adidas-may-2023-adilette-22-banner.jpg?w=1920"
                     class="d-block w-100 h-100 object-fit-cover" alt="Slide 3">
            </div>
            <div class="carousel-item h-100">
                <img src="https://vn.louisvuitton.com/images/is/image//content/dam/lv/editorial-content/brand-content-coremedia/women/2025/category/slg/WSLG_PO_LVBLOOM_DI3.jpg?wid=2400"
                     class="d-block w-100 h-100 object-fit-cover" alt="Slide 4">
            </div>
            <div class="carousel-item h-100">
                <img src="https://www.chanel.com/puls-img/c_limit,w_1920/q_auto:good,dpr_auto,f_auto/1751275456896-homepagecorpoonedesktop36jpg_2510x5760.jpg"
                     class="d-block w-100 h-100 object-fit-cover" alt="Slide 5">
            </div>
        </div>
    </div>

    <!-- Overlay content -->
    <div class="container position-relative z-2 text-white">
        <div class="row align-items-center min-vh-75">
            <div class="col-lg-6">
                <h1 class="display-3 fw-bold mb-4">
                    It's not just fashion—it's <em>legacy</em>
                </h1>
                <p class="lead mb-4 text-white-50">
                    Discover timeless pieces that define your style and create lasting impressions.
                    Fashion that transcends trends and becomes part of your story.
                </p>
                <div class="d-flex flex-column flex-sm-row gap-3">
                    <button class="btn btn-dark btn-lg px-4">Shop Collection</button>
                    <button class="btn btn-outline-light btn-lg px-4">Explore Trends</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Optional: dark overlay -->
    <div class="position-absolute top-0 start-0 w-100 h-100 bg-dark opacity-50"></div>
</section>

<!-- Main Content -->
<div class="container my-5">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-lg-3 mb-4">
            <!-- Search -->
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Search Products</h5>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-search"></i></span>
                        <input type="text" class="form-control" placeholder="Search by name" id="searchInput">
                    </div>
                </div>
            </div>

            <!-- Price Filter -->
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Price Range</h5>
                    <div class="row g-2">
                        <div class="col">
                            <input type="number" class="form-control form-control-sm" placeholder="Min" id="minPrice">
                        </div>
                        <div class="col-auto align-self-center">-</div>
                        <div class="col">
                            <input type="number" class="form-control form-control-sm" placeholder="Max" id="maxPrice">
                        </div>
                    </div>
                </div>
            </div>

            <!--Category Filter -->
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Categories</h5>
                    <div class="form-check" th:each="category : ${categories}">
                        <input class="form-check-input category-filter" type="checkbox" th:value="${category.id}"
                               th:id="'cat' + ${category.id}">
                        <label class="form-check-label" th:for="'cat' + ${category.id}"
                               th:text="${category.categoryName}">Category</label>
                    </div>
                </div>
            </div>

            <!--Sub Category Filter -->
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Subcategories</h5>
                    <div class="form-check" th:each="sub : ${subcategories}">
                        <input class="form-check-input subcategory-filter" type="checkbox"
                               th:value="${sub.id}" th:id="'subcat' + ${sub.id}">
                        <label class="form-check-label" th:for="'subcat' + ${sub.id}"
                               th:text="${sub.subcategoryName}">Subcategory</label>
                    </div>
                </div>
            </div>

            <!-- Brand Filter -->
            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Brands</h5>
                    <div class="form-check" th:each="brand : ${brands}">
                        <input class="form-check-input brand-filter" type="checkbox" th:value="${brand.id}"
                               th:id="'brand' + ${brand.id}">
                        <label class="form-check-label" th:for="'brand' + ${brand.id}" th:text="${brand.brandName}">Brand</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Products Grid -->
        <div class="col-lg-9">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h2 class="fw-bold mb-2">Featured Products</h2>
                    <p class="text-muted">Discover our latest collection</p>
                </div>
            </div>

            <div class="row" id="productGrid">
                <div class="col-md-4 mb-4" th:each="product : ${products}">
                    <div class="card h-100">
                        <a th:href="@{'/products/' + ${product.id}}" class="text-decoration-none text-dark">
                            <img th:if="${product.image != null}"
                                 th:src="@{'/products/image/' + ${product.id}}"
                                 class="card-img-top"
                                 alt="Product Image"
                                 style="height: 350px; object-fit: cover;">
                            <img th:if="${product.image == null}"
                                 th:src="@{/images/default.png}"
                                 class="card-img-top"
                                 alt="Default Product Image"
                                 style="height: 350px; object-fit: cover;">
                        </a>
                        <div class="card-body">
                            <a th:href="@{'/products/' + ${product.id}}" class="text-decoration-none text-dark">
                                <h5 class="card-title" th:text="${product.productName}">Product Name</h5>
                            </a>
                            <p class="card-text text-muted" th:text="${product.subcategory.subcategoryName}"></p>
                            <p class="card-text text-muted" th:text="${product.category.categoryName}"></p>
                            <p class="fw-bold" th:text="${product.formatPrice(product.price)} +' VNĐ'">$0.00</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 d-flex justify-content-center mt-4" id="loadMoreContainer">
                    <button class="btn btn-outline-dark btn-lg px-4" id="loadMoreBtn">Load More Products</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!--Chat-->
<div th:if="${currentUser != null and roleId == 2}">
    <div th:replace="fragments/chat :: chatWidget"></div>
</div>
<!-- Footer -->
<div th:replace="fragments/footer :: footer"></div>

<div th:replace="fragments/cart :: cart"></div>

<!-- Toast thông báo -->
<div th:replace="fragments/add-to-cart-notification :: add-to-cart-notification"></div>


<script src="/js/script.js"></script>
<script src="/js/shop.js"></script>
</body>
<!-- Bootstrap 5 JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>

<!-- Custom JS -->
</html>
